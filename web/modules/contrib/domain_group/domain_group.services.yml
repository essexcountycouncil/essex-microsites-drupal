services:
  domain_group_resolver:
    class: Drupal\domain_group\DomainGroupResolver
    arguments: ['@entity_type.manager', '@domain.negotiator', '@current_route_match']
  plugin.manager.domain_group_settings:
    class: Drupal\domain_group\Plugin\DomainGroupSettingsManager
    parent: default_plugin_manager
  domain_group.login_page_event_subscriber:
    class: Drupal\domain_group\EventSubscriber\LoginPageRedirect
    arguments: ['@domain.negotiator', '@entity_type.manager', '@current_user', '@current_route_match', '@config.factory']
    tags:
      - {name: event_subscriber}
  domain_group.query_access_event_subscriber:
    class: Drupal\domain_group\EventSubscriber\QueryAccessSubscriber
    arguments: ['@domain_group_resolver', '@messenger']
    tags:
      - { name: event_subscriber }
  domain_group.domain_group_context:
    class: Drupal\domain_group\ContextProvider\DomainGroupContext
    arguments: ['@domain_group_resolver']
    tags:
      - { name: 'context_provider' }
  domain_group.config_sync_event_subscriber:
    class: Drupal\domain_group\EventSubscriber\ConfigSubscriber
    arguments: ['@config.storage', '@config.storage.sync']
    tags:
      - { name: event_subscriber }
